## 開発ログ part1
___
- 一応、レースゲーム作成を目標に Unity の基本をこなす
- それっぽいゲームを完成させたら、android ビルドのテストしたい
    - 実機、ブルスタでデバッグしたい
- 参考 まとめ
    - (Unityで作る超ざっくりレースゲーム講座)[http://softmedia.sakura.ne.jp/advent-calendar/2018/12-23.html]

## 目標チェックリスト
- コース作成
- カートデザイン
- カート動作
    - 衝突、ブレーキ
- ゲームの枠組みについて
    - メニュー画面とか、設定画面とかどうするのか
- apk コンパイル (アンドロイドアプリビルド) のやり方
- 以上をクリアしたら、プロジェクト始める

## とりあえず、いろいろ触ってみる
- オブジェクトの作成
    - 右の Hierarchy の下の + クリックで、いろいろ作成できる
- オブジェクトに色付け
    - 右下の Project の下の + クリックで material 選択で、色を選択
    - hierarchy の色付けしたいオブジェクトに D&D で色付けできる
- Rigidbody の追加
    - オブジェクトを選択、右下の add component で Physics -> Rigidbody
- コースの作成
    - hierarchy > + > Create Empty で空のオブジェクトを作成して、その子オブジェクトに Cube を作って壁を作っていく。
    - 壁に当たった時、車がひっくり返る挙動をとる
        - RigidBody の Constraints で、xyz 軸に対する重力の制約を設けることができる。
        - freeze rotation の、 xyz 全部チェックで解決。(多分)
        - 参考: (Unity でキャラクタに Rigid Body を付けると転ぶ問題への対応)[https://qiita.com/_meki/items/5c1df1804d009ec1393e]
- アセットのインポート方法
    - Window > Package Manager でパッケージマネージャを開いてインポートする
- **シーン間の移動** 使えそう!
    - [Unity：ボタンクリックでシーン間を遷移（移動）する](https://dianxnao.com/%E3%83%9C%E3%82%BF%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF%E3%81%A7%E3%82%B7%E3%83%BC%E3%83%B3%E9%96%93%E3%82%92%E9%81%B7%E7%A7%BB%EF%BC%88%E7%A7%BB%E5%8B%95%EF%BC%89%E3%81%99%E3%82%8B/)

## エラー・不明点
- (修正済)getkey でupperArrow を入力すると、オブジェクトが上昇するのでなく、上に回転しながら飛び上がる挙動
    - オブジェクトの position がオブジェクトの中心になってて、地面とかぶる形になってることが問題で変な挙動になってた。
        - 初期 position の y 座標を scale の半分にすることで解決。
        - 座標をオブジェクトの下面に合わせることでも解決できるかも？？
- (修正済)カメラの位置がずれる
    - 追従対象のオブジェクトを初期位置に戻して、カメラを手動で調整し、対象のオブジェクトの子オブジェクトに設定することでカメラの位置を調整し、オブジェクトに追従させることができる
- (修正済)回転がうまくできない
    - オブジェクトを回転させたとき、「移動」させるメソッドを使うと、回転して、移動する形になる。
    - カーブさせるには、回転させ、オブジェクトの向いてる方向に進行させるようにコーディングする
- プロジェクトのバックアップが取れない
    - 間違えて上書きしたとき、`git pull` では戻らなかった
    - Unity はシーンで保存する仕様っぽい
    - プラグインで github for unity 導入。解決された？

## 開発ログ
### 9/24
- android アプリビルド
    - File > Build Setting > ビルド対象の OS 選択 でビルドできる (ファイル名, アイコンなども設定できる)
    - BlueStacks でデバッグした。
        - 矢印キーで移動にしてるので、BlueStacks でも矢印キーで動くようになってた。
        - モバイルアプリにするには、操作ボタンなど配置する必要がありそう。
- コースの座標がずれてる問題
    - 床を plane かなんかで作って、その子オブジェクトにコースを設置する
- ボタン配置 ＋ onClick 関数の実装
    - Hierarchy 下の ＋ から Create Empty で GameObject 作成して、そこに自作スクリプトを add component する
    - スクリプトをアタッチした Game Object を 作った Button の Onclick に DD し、実行させる関数を選択する。
    - **Onclick に関して**
        - Onclick に指定した関数は、クリック時に一度しか実行されない!!
        - よって、**長押しで加速したい場合(レースゲームなど)には向いてない。**
        - 長押しに対応させたい場合
            - Add Component > Event Trigger で pointer down と pointer up を追加することで対応できる。(**押された瞬間と離した瞬間の２つのスクリプトが必要になる**)
- 回転のパラメータ調整が面倒くさい
    - getaxis 関数でキー入力を取得していたのを、ボタン入力取得に偏光したので、パラメータを調整しなおす必要がある。
    - 速度やコースとの兼ね合いもあるため、後で調整することにする。
- コーディングに関して
    - 現在、ボタンのスクリプトに車(物体)を動かすスクリプトを書いてるけど、物体の動きに関するスクリプトは物体のスクリプトに書いて、ボタンスクリプトは操作のみ担当するようにしたほうがなんかよさそう。
    - 捜査するコードから、物体のスクリプトを読み込んで、移動メソッドを実行する... みたいな感じ
    - 参考
        - [[Unity]他のオブジェクトについているスクリプトの変数を参照したり関数を実行したりする。](https://qiita.com/tsukasa_wear_parker/items/09d4bcc5af3556b9bb3a)